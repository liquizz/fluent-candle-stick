<div class="container">
  <h1>Candle Stick Data</h1>

  <div class="file-upload-section">
    <h2>Import Market Data</h2>
    <div class="file-form">
      <input type="file" (change)="onFileSelected($event)" accept=".csv" id="file-upload" />
      <button (click)="uploadFile()" [disabled]="isLoading">Upload CSV</button>
    </div>
    <p class="error" *ngIf="error">{{ error }}</p>
  </div>

  <div class="loading" *ngIf="isLoading">Loading...</div>

  <div class="data-section" *ngIf="hasData">
    <h2>Candle Stick Data (Minute Intervals)</h2>
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Time</th>
            <th>Open</th>
            <th>Close</th>
            <th>High</th>
            <th>Low</th>
            <th>Volume</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let candleStick of candleStickData" [ngClass]="getRowClass(candleStick)">
            <td>{{ candleStick.time | date:'dd/MM/yyyy HH:mm' }}</td>
            <td>{{ candleStick.open }}</td>
            <td>{{ candleStick.close }}</td>
            <td>{{ candleStick.high }}</td>
            <td>{{ candleStick.low }}</td>
            <td>{{ candleStick.volume }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="no-data" *ngIf="!hasData && !isLoading">
    <p>No data available. Please import a CSV file to see candle stick data.</p>
    <p class="csv-format">
      CSV Format: <br>
      TIME,QUANTITY,PRICE <br>
      17/06/2022 12:23:17.308,1000000,1.36257 <br>
      17/06/2022 12:00:24.118,500000,1.36273 <br>
      ...
    </p>
  </div>
</div>
